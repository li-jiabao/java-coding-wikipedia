# 缓存淘汰、过期

## 缓存淘汰算法

- 先进先出FIFO（First in First out）：采用队列的先进先出原则，先进来的缓存，在缓存空间不足的时候，需要将先进来的缓存清理掉释放空间
- 最近最少使用LRU（Least Rencently used）：根据缓存的最近使用时间来判断，当缓存最近使用时间据当前较远时，先清理掉
- 最近不经常使用LFU（Least Frequently used）：根据缓存的最近一段时间内使用的次数来判断，使用次数越少，先被清理

redis中具体的缓存淘汰策略：

- `noeviction`不清理的策列，直接报错，交给程序员自己决定删除那一部分缓存
- `allkey-random`：从所有缓存中随机选取一个缓存清理
- `volatile-random`：从设置了过期时间的缓存中随机选择一个清理
- `allkey-lru`：所有缓存中一句最近最不经常使用算法来淘汰缓存
- `volatile-lru`：设置了过期时间的缓存中采用lru算法淘汰缓存
- `volatile-ttl`：从设置了过期时间的缓存中选择即将要过期的缓存

## 缓存过期策略

- 定时清理：使用定时器，没经过一定的时间之后，就开始一次过期缓存的清理（可以全部缓存的清理，也可以随机选取一部分的缓存进行清理）redis是默认100ms清理一次，清理是随机选择一部分设置了过期时间的缓存
- 惰性清理：在访问缓存发现缓存已经过期的情况下，将该缓存清理掉